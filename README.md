# GWC2025特別企画 『Gopher Stamp Rally』

GWC2025（Go Workshop Conference 2025）の特別企画として開催されるスタンプラリーアプリです。参加者は会場内の各ブースやワークショップを訪れ、スタンプを集めることができます。

## 主な機能

### スタンプラリー
- **スタンプ一覧**: 全8種類のスタンプを確認できます
- **スタンプ獲得**: QRコードをスキャンしてスタンプを獲得
- **進捗表示**: 獲得したスタンプの数と進捗率を表示
- **スタンプ詳細**: 各スタンプの詳細情報（開催時間、場所など）を確認

### 参加者一覧
- **参加者表示**: スタンプラリーに参加している全ユーザーを一覧表示
- **参加者詳細**: 各参加者の獲得スタンプ状況を確認

### 初回訪問者向け情報
- **初回ポップアップ**: 初めてサイトを訪れた方に、KIITOホールへの案内とフロアマップを表示
- **タイムテーブル**: 各ページのヘッダーからタイムテーブルへのリンクを提供

## 使い方

### 1. 初回アクセス時
1. サイトにアクセスすると、まず「初めての方へ」ポップアップが表示されます
2. KIITOホールの案内とフロアマップを確認し、「OK」をクリック
3. 次にユーザー登録ダイアログが表示されます
4. ユーザー名を入力して登録を完了

### 2. スタンプラリー
1. ホーム画面から自動的にスタンプラリーページに遷移します
2. スタンプ一覧で、獲得済み/未獲得のスタンプを確認できます
3. 各スタンプをタップすると、詳細情報（開催時間、場所など）が表示されます
4. QRコードをスキャンしてスタンプを獲得します

### 3. 参加者一覧
1. フッターの「参加者一覧」リンクから参加者一覧ページにアクセス
2. 全参加者の一覧と、各参加者の獲得スタンプ数を確認できます
3. 参加者をタップすると、詳細な獲得状況を確認できます

### 4. スタンプの種類
- **午前ワークショップ**: 10:30 ~ 12:30のKIITOホールで行われるワークショップ
- **午後ワークショップ**: 15:45 ~ 17:45のKIITOホールで行われるワークショップ
- **シャッフルランチ**: ギャラリーAのブースAで12:30 - 14:00に開かれるシャッフルランチ
- **ジェスチャーゲーム**: ギャラリーAのGo製のゲーム展示で開かれるジェスチャーゲーム
- **Go製のゲーム展示・ゲーム作りブース**: ギャラリーAのジェスチャーゲームで10:30 - 14:00 & 15:30 - 17:45に開かれるブース
- **Gopher Wall1 , 2, 3**: 会場内のWall企画

## ローカルでの起動方法

### 前提条件
- Node.js 18以上
- pnpm（またはnpm/yarn）
- Go 1.24以上
- Docker & Docker Compose（データベース用）

### 1. リポジトリのクローン
```bash
git clone <repository-url>
cd 2025_gopher_StampRally
```

### 2. バックエンドの起動

#### データベースの起動
```bash
cd backend
docker-compose up -d
```

#### 環境変数の設定
`backend/services/gopher-stamp-crud/.env`ファイルを作成し、以下の環境変数を設定します：

```env
DB_HOST=localhost
DB_PORT=3306
DB_USER=gopher
DB_PASSWORD=stamprallypass
DB_NAME=stamprally_db
CORS_ALLOWED_ORIGIN=http://localhost:3000
BASE_API_URL=
```

#### バックエンドサーバーの起動
```bash
cd backend/services/gopher-stamp-crud
go mod download
go generate ./cmd/wire_server
go run ./cmd/server
```

バックエンドサーバーは`http://localhost:8080`で起動します。

### 3. フロントエンドの起動

#### 依存関係のインストール
```bash
cd frontend
pnpm install
```

#### 環境変数の設定（オプション）
`frontend/.env.local`ファイルを作成し、APIのベースURLを設定します（デフォルトは`http://localhost:8080`）：

```env
NEXT_PUBLIC_API_BASE_URL=http://localhost:8080
```

#### 開発サーバーの起動
```bash
pnpm dev
```

フロントエンドは`http://localhost:3000`で起動します。

### 4. 動作確認
1. ブラウザで`http://localhost:3000`にアクセス
2. 初回ポップアップが表示されることを確認
3. ユーザー登録を行い、スタンプラリーページに遷移することを確認

### データベースのマイグレーション
初回起動時、データベースは自動的にマイグレーションされ、初期スタンプデータが投入されます。

### トラブルシューティング

#### データベース接続エラー
- Dockerコンテナが起動しているか確認: `docker-compose ps`
- 環境変数が正しく設定されているか確認

#### CORSエラー
- `CORS_ALLOWED_ORIGIN`がフロントエンドのURLと一致しているか確認
- デフォルト値は`https://2025-gopher-stamp-rally.vercel.app`です

#### ポートが既に使用されている場合
- バックエンド: `8080`ポートを変更する場合は、フロントエンドの`NEXT_PUBLIC_API_BASE_URL`も更新
- フロントエンド: `3000`ポートを変更する場合は、`pnpm dev -- -p <port>`で指定
